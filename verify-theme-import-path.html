<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Verify Theme Import Path</title>
  <link rel="stylesheet" href="https://cdn.nav.no/@navikt/ds-css/5.18.3/darkside.min.css">
  <style>
    body { padding: 2rem; font-family: sans-serif; max-width: 1000px; margin: 0 auto; }
    .result { margin: 1rem 0; padding: 1rem; background: #f5f5f5; border-radius: 4px; }
    .success { background: #d4edda; color: #155724; }
    .error { background: #f8d7da; color: #721c24; }
    pre { background: #1e1e1e; color: #d4d4d4; padding: 1rem; border-radius: 4px; overflow-x: auto; }
  </style>
</head>
<body>
  <h1>Theme Import Path Verification</h1>
  <div id="results"></div>
  
  <h2>Rendered Test:</h2>
  <div id="test-render"></div>

  <script type="module">
    import React from 'https://esm.sh/react@18.3.1';
    import ReactDOM from 'https://esm.sh/react-dom@18.3.1/client';
    
    const resultsDiv = document.getElementById('results');
    const testRenderDiv = document.getElementById('test-render');
    
    function addResult(message, isSuccess = true) {
      const div = document.createElement('div');
      div.className = `result ${isSuccess ? 'success' : 'error'}`;
      div.innerHTML = message;
      resultsDiv.appendChild(div);
    }

    try {
      // Test 1: Import from main package
      addResult('⏳ Test 1: Importing from @navikt/ds-react...', true);
      const akselMain = await import('https://esm.sh/@navikt/ds-react@5.18.3');
      addResult(`✅ Main import successful (${Object.keys(akselMain).length} exports)`, true);
      addResult(`   Theme in main: ${!!akselMain.Theme}`, true);
      
      // Test 2: Import from /Theme subpath
      addResult('<br>⏳ Test 2: Importing from @navikt/ds-react/Theme...', true);
      try {
        const themeModule = await import('https://esm.sh/@navikt/ds-react@5.18.3/Theme');
        addResult(`✅ Theme subpath import successful!`, true);
        addResult(`   Exports: ${Object.keys(themeModule).join(', ')}`, true);
        
        const { Theme } = themeModule;
        addResult(`   Theme component: ${typeof Theme}`, true);
        
        // Test 3: Render with Theme
        addResult('<br>⏳ Test 3: Rendering with Theme component...', true);
        
        const { Button } = akselMain;
        
        const root = ReactDOM.createRoot(testRenderDiv);
        root.render(
          React.createElement(Theme, null,
            React.createElement(Button, { variant: 'primary' }, 'Test Button with Theme')
          )
        );
        
        addResult('✅ Rendered with Theme wrapper!', true);
        
        // Check the DOM
        setTimeout(() => {
          const themeDiv = testRenderDiv.querySelector('.aksel-theme');
          const button = testRenderDiv.querySelector('button');
          
          if (themeDiv) {
            addResult(`✅ Found .aksel-theme div with classes: ${themeDiv.className}`, true);
          } else {
            addResult(`❌ No .aksel-theme div found`, false);
          }
          
          if (button && button.classList.contains('navds-button')) {
            addResult(`✅ Button has navds-button class!`, true);
            const styles = window.getComputedStyle(button);
            addResult(`   Background: ${styles.backgroundColor}`, true);
          } else if (button) {
            addResult(`❌ Button missing navds-button class. Classes: ${button.className}`, false);
          }
        }, 500);
        
      } catch (err) {
        addResult(`❌ Theme subpath import failed: ${err.message}`, false);
        addResult(`<pre>${err.stack}</pre>`, false);
      }
      
    } catch (error) {
      addResult(`❌ Error: ${error.message}`, false);
      addResult(`<pre>${error.stack}</pre>`, false);
    }
  </script>
</body>
</html>
