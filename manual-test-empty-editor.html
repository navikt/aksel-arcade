<!DOCTYPE html>
<html>
<head>
  <title>Clear Storage and Test Empty Editor</title>
  <style>
    body { 
      font-family: system-ui, sans-serif; 
      padding: 40px;
      background: #1a1a1a;
      color: white;
      text-align: center;
    }
    button {
      padding: 15px 30px;
      font-size: 18px;
      background: #0af;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin: 10px;
    }
    button:hover { background: #08d; }
    .info {
      background: #2a2a2a;
      padding: 20px;
      border-radius: 8px;
      margin: 20px auto;
      max-width: 600px;
      text-align: left;
    }
    .step {
      margin: 15px 0;
      padding-left: 30px;
    }
  </style>
</head>
<body>
  <h1>üßπ Manual Test: Empty Editor</h1>
  
  <div class="info">
    <h2>Test Plan:</h2>
    <div class="step">1. Click "Clear Storage & Open App" button below</div>
    <div class="step">2. In the editor, delete ALL code (Cmd+A, Delete)</div>
    <div class="step">3. Wait 1 second for debounce</div>
    <div class="step">4. Check preview pane - should see NO error</div>
    <div class="step">5. Preview should be blank (no error alert)</div>
  </div>

  <button onclick="clearAndOpen()">Clear Storage & Open App</button>
  
  <div class="info" style="margin-top: 40px;">
    <h2>Expected Result:</h2>
    <p>‚úÖ Empty editor should show blank preview (no compile error)</p>
    <p>‚ùå OLD BUG: Would show "Compile Error (line 7): Unexpected token"</p>
  </div>

  <script>
    function clearAndOpen() {
      // Clear localStorage
      localStorage.clear();
      
      // Open app in new tab
      const url = 'http://localhost:5173';
      window.open(url, '_blank');
      
      document.body.innerHTML += `
        <div class="info" style="background: #0a3; margin-top: 30px;">
          <p style="font-size: 1.2em; margin: 0;">
            ‚úÖ Storage cleared! App opened in new tab.
          </p>
          <p style="margin: 10px 0 0;">
            Follow the test steps above to verify the fix.
          </p>
        </div>
      `;
    }
  </script>
</body>
</html>
