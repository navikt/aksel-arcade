<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Direct Sandbox Inspection</title>
  <style>
    body { padding: 2rem; font-family: monospace; }
    .pass { color: green; font-weight: bold; }
    .fail { color: red; font-weight: bold; }
    pre { background: #f5f5f5; padding: 1rem; border-radius: 4px; }
    .result { margin: 1rem 0; padding: 1rem; border: 2px solid #ccc; border-radius: 4px; }
  </style>
</head>
<body>
  <h1>Direct Sandbox.html Inspection</h1>
  <div id="results"></div>

  <script>
    const results = document.getElementById('results');
    
    function addResult(title, pass, details) {
      const div = document.createElement('div');
      div.className = 'result';
      div.innerHTML = `
        <div class="${pass ? 'pass' : 'fail'}">${pass ? '✅' : '❌'} ${title}</div>
        ${details ? `<pre>${details}</pre>` : ''}
      `;
      results.appendChild(div);
    }

    async function runInspection() {
      try {
        // Fetch the sandbox.html file
        const response = await fetch('/sandbox.html');
        const html = await response.text();
        
        // Check 1: Theme import
        const hasThemeImport = html.includes('@navikt/ds-react@5.18.3/Theme');
        addResult(
          'Theme module import present',
          hasThemeImport,
          hasThemeImport ? 'Found: import(...@navikt/ds-react/Theme)' : 'Missing Theme import'
        );

        // Check 2: Theme variable declaration
        const hasThemeVariable = html.includes('let Theme = null');
        addResult(
          'Theme variable declared',
          hasThemeVariable,
          hasThemeVariable ? 'Found: let Theme = null;' : 'Missing Theme variable'
        );

        // Check 3: Theme assignment from module
        const hasThemeAssignment = html.includes('Theme = ThemeModule.Theme');
        addResult(
          'Theme assigned from ThemeModule',
          hasThemeAssignment,
          hasThemeAssignment ? 'Found: Theme = ThemeModule.Theme;' : 'Missing Theme assignment'
        );

        // Check 4: Theme used in createElement
        const hasThemeInRender = html.includes('React.createElement(Theme');
        addResult(
          'Theme used in React.createElement',
          hasThemeInRender,
          hasThemeInRender ? 'Found: React.createElement(Theme, ...)' : 'Missing Theme in render'
        );

        // Check 5: Darkside CSS
        const hasDarksideCSS = html.includes('darkside.min.css');
        addResult(
          'Darkside CSS linked',
          hasDarksideCSS,
          hasDarksideCSS ? 'Found: darkside.min.css' : 'Missing darkside CSS'
        );

        // Check 6: Promise.all for loading both modules
        const hasPromiseAll = html.includes('Promise.all([');
        addResult(
          'Parallel module loading (Promise.all)',
          hasPromiseAll,
          hasPromiseAll ? 'Found: Promise.all([...])' : 'Missing Promise.all'
        );

        // Summary
        const allPassed = hasThemeImport && hasThemeVariable && hasThemeAssignment && 
                         hasThemeInRender && hasDarksideCSS && hasPromiseAll;
        
        addResult(
          'OVERALL VERIFICATION',
          allPassed,
          allPassed ? 'All checks passed! Theme wrapper is properly configured.' : 
                     'Some checks failed. Review the details above.'
        );

      } catch (err) {
        addResult('Fetch sandbox.html', false, err.message);
      }
    }

    runInspection();
  </script>
</body>
</html>
